# **–ù–µ–¥–µ–ª—è 14: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –¥–µ–ø–ª–æ–π (—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)**

## **üìë –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ**

1. [–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å](#—Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è-—á–∞—Å—Ç—å)
   - [1. –§–∏–ª–æ—Å–æ—Ñ–∏—è production-ready –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π](#1-—Ñ–∏–ª–æ—Å–æ—Ñ–∏—è-production-ready-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
   - [2. ASGI —Å–µ—Ä–≤–µ—Ä—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å](#2-asgi-—Å–µ—Ä–≤–µ—Ä—ã-–∏-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
   - [3. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å Docker](#3-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è-—Å-docker)
   - [4. –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤](#4-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)
   - [5. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞](#5-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-–¥–ª—è-–ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
   - [6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏](#6-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–º–µ—Ç—Ä–∏–∫–∏)
   - [7. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ](#7-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å-–≤-–ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
   - [8. CI/CD –ø–∞–π–ø–ª–∞–π–Ω](#8-cicd-–ø–∞–π–ø–ª–∞–π–Ω)
2. [–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å](#–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è-—á–∞—Å—Ç—å)
   - [1. Dockerfile (–º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞)](#1-dockerfile-–º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è-—Å–±–æ—Ä–∫–∞)
   - [2. Docker Compose](#2-docker-compose-–¥–ª—è-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏-–∏-–ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
   - [3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx](#3-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-nginx)
   - [4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus](#4-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-prometheus)
   - [5. –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ FastAPI](#5-–º–µ—Ç—Ä–∏–∫–∏-–∏-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-fastapi)
3. [–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –Ω–µ–¥–µ–ª—é 14](#–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ-–∑–∞–¥–∞–Ω–∏–µ-–Ω–∞-–Ω–µ–¥–µ–ª—é-14)
4. [–ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏](#–∫—Ä–∏—Ç–µ—Ä–∏–∏-–æ—Ü–µ–Ω–∫–∏)
5. [–ò—Ç–æ–≥ –Ω–µ–¥–µ–ª–∏ 14](#–∏—Ç–æ–≥-–Ω–µ–¥–µ–ª–∏-14)

---

## **üìö –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å**

### **1. –§–∏–ª–æ—Å–æ—Ñ–∏—è production-ready –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**

#### **–ó–∞—á–µ–º –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É?**

**–ê–Ω–∞–ª–æ–≥–∏—è:** –ú–∞—à–∏–Ω–∞ –Ω–∞ –∏—Å–ø—ã—Ç–∞—Ç–µ–ª—å–Ω–æ–º —Ç—Ä–µ–∫–µ –∏ –º–∞—à–∏–Ω–∞ –≤ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ ‚Äî —Ä–∞–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏. –ù–∞ —Ç—Ä–µ–∫–µ –≤–∞–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –æ—Ç–ª–∞–¥–∫–∞; –Ω–∞ –¥–æ—Ä–æ–≥–µ ‚Äî –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, —ç–∫–æ–Ω–æ–º–∏—á–Ω–æ—Å—Ç—å, —á—Ç–æ–±—ã –µ–∑–¥–∏—Ç—å –≥–æ–¥–∞–º–∏ –±–µ–∑ –ø–æ–ª–æ–º–æ–∫.

**–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:** –í dev-—Å—Ä–µ–¥–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Äî —Å–∫–æ—Ä–æ—Å—Ç—å –∏—Ç–µ—Ä–∞—Ü–∏–π, –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –ø—Ä–æ—Å—Ç–æ—Ç–∞ –∑–∞–ø—É—Å–∫–∞. –í production ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å. –¢–µ –∂–µ ¬´–¥–≤–∏–∂–æ–∫ –∏ –∫—É–∑–æ–≤¬ª, –Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥—Ä—É–≥–∏–º–∏.

#### **–†–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º:**

**–ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è:** –í production –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞–¥–µ–∂–Ω—ã–º, –±–µ–∑–æ–ø–∞—Å–Ω—ã–º –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–º. –≠—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥—Ä—É–≥–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –ø–æ–¥—Ö–æ–¥–æ–≤.

```python
# –†–ê–ó–†–ê–ë–û–¢–ö–ê (Development)                     # –ü–†–û–î–ê–ö–®–ï–ù (Production)
# ----------------------------------------------------------------
DEBUG = True                                   DEBUG = False
SECRET_KEY = "dev-key"                         SECRET_KEY = "256-bit-–∫–ª—é—á-–∏–∑-—Å–µ–∫—Ä–µ—Ç–æ–≤"
DATABASE_URL = "sqlite:///dev.db"              DATABASE_URL = "postgresql://user:pass@host/db"
workers = 1                                    workers = 4
reload = True                                  reload = False
log_level = "debug"                            log_level = "warning"
–±–µ–∑ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è                                Redis/Memcached –∫—ç—à
—Ñ–∞–π–ª—ã –Ω–∞ –¥–∏—Å–∫–µ                                 S3/CDN –¥–ª—è —Ñ–∞–π–ª–æ–≤
–±–µ–∑ rate limiting                              rate limiting –∏ WAF
–æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä                                    –∫–ª–∞—Å—Ç–µ—Ä —Å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–æ–º
```

**–ü–æ—á–µ–º—É —ç—Ç–∏ —Ä–∞–∑–ª–∏—á–∏—è –≤–∞–∂–Ω—ã:**
- **DEBUG=False** ‚Äî –æ—Ç–∫–ª—é—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç —Ä–∞—Å–∫—Ä—ã—Ç—å —É—è–∑–≤–∏–º–æ—Å—Ç–∏
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤** ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Rate limiting** ‚Äî –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç DDoS –∏ –±—Ä—É—Ç—Ñ–æ—Ä—Å –∞—Ç–∞–∫
- **–ö–ª–∞—Å—Ç–µ—Ä** ‚Äî –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

#### **–ü—Ä–∏–Ω—Ü–∏–ø—ã production-ready –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**

1. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –æ–∫—Ä—É–∂–µ–Ω–∏–µ** ‚Äî —Å–µ–∫—Ä–µ—Ç—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ –≤ –∫–æ–¥–µ, –∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. **Stateless –ø—Ä–æ—Ü–µ—Å—Å—ã** ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç —Å–µ—Å—Å–∏—é ¬´–≤ —Å–µ–±–µ¬ª; —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Äî –≤ –ë–î/–∫—ç—à–µ
3. **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–æ–≤/—Ä–µ–ø–ª–∏–∫ —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
4. **–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å** ‚Äî –ª–æ–≥–∏, –º–µ—Ç—Ä–∏–∫–∏ –∏ —Ç—Ä–µ–π—Å–∏–Ω–≥ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞
5. **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ** ‚Äî graceful shutdown, health/readiness –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

#### **12-—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (The Twelve-Factor App):**
1. **–ö–æ–¥–æ–≤–∞—è –±–∞–∑–∞** - –æ–¥–Ω–∞ –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞, –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–π
2. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** - —è–≤–Ω–æ –æ–±—ä—è–≤–ª—è–π—Ç–µ –∏ –∏–∑–æ–ª–∏—Ä—É–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - —Ö—Ä–∞–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏
4. **–°—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Å–ª—É–∂–±—ã** - —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Å–ª—É–∂–±—ã –∫–∞–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
5. **–°–±–æ—Ä–∫–∞, —Ä–µ–ª–∏–∑, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** - —Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–¥–µ–ª—è–π—Ç–µ —ç—Ç–∞–ø—ã —Å–±–æ—Ä–∫–∏ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
6. **–ü—Ä–æ—Ü–µ—Å—Å—ã** - –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–∞–∫ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
7. **–ü—Ä–∏–≤—è–∑–∫–∞ –ø–æ—Ä—Ç–æ–≤** - —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Å–ª—É–∂–±—ã —á–µ—Ä–µ–∑ –ø—Ä–∏–≤—è–∑–∫—É –ø–æ—Ä—Ç–æ–≤
8. **–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º** - –º–∞—Å—à—Ç–∞–±–∏—Ä—É–π—Ç–µ —á–µ—Ä–µ–∑ –º–æ–¥–µ–ª—å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
9. **–£—Ç–∏–ª–∏–∑–∏—Ä—É–µ–º–æ—Å—Ç—å** - –º–∞–∫—Å–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –±—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
10. **–ü–∞—Ä–∏—Ç–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏/–ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–∏–±–ª–∏–∂–∞–π—Ç–µ —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
11. **–õ–æ–≥–∏** - —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –ª–æ–≥–∏ –∫–∞–∫ –ø–æ—Ç–æ–∫ —Å–æ–±—ã—Ç–∏–π
12. **–ó–∞–¥–∞—á–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è** - –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –∑–∞–¥–∞—á–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è/—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–∫ —Ä–∞–∑–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã

### **2. ASGI —Å–µ—Ä–≤–µ—Ä—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**

#### **–ó–∞—á–µ–º –Ω—É–∂–Ω—ã ASGI —Å–µ—Ä–≤–µ—Ä—ã?**

**–ê–Ω–∞–ª–æ–≥–∏—è:** FastAPI ‚Äî —ç—Ç–æ ¬´—Å—Ü–µ–Ω–∞—Ä–∏–π —Å–ø–µ–∫—Ç–∞–∫–ª—è¬ª: —á—Ç–æ –¥–µ–ª–∞—Ç—å –ø–æ –∫–∞–∂–¥–æ–º—É –∑–∞–ø—Ä–æ—Å—É. ASGI-—Å–µ—Ä–≤–µ—Ä (Uvicorn, Gunicorn+Uvicorn) ‚Äî —ç—Ç–æ ¬´—Å—Ü–µ–Ω–∞ –∏ –∑–∞–ª¬ª: –æ–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –¥–µ—Ä–∂–∏—Ç –ø—É–ª –≤–æ—Ä–∫–µ—Ä–æ–≤, —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–∞–π–º–∞—É—Ç–∞–º–∏ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏. –ë–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫.

**–í –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:** –í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —á–∞—Å—Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ `uvicorn main:app --reload`. –í production –Ω—É–∂–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ—Ä–∫–µ—Ä–æ–≤, graceful shutdown, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã –∏, –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏ ‚Äî –ø—Ä–æ—Ü–µ—Å—Å-–º–µ–Ω–µ–¥–∂–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, Gunicorn) –ø–æ–≤–µ—Ä—Ö Uvicorn.

#### **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ ASGI —Å–µ—Ä–≤–µ—Ä–æ–≤:**

| –°–µ—Ä–≤–µ—Ä | –ù–∞–ø–∏—Å–∞–Ω–æ –Ω–∞ | –ú—É–ª—å—Ç–∏–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTTP/2 | WebSockets | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|--------|------------|------------------|---------------|------------------|------------|-----------|
| **Uvicorn** | Python | ‚ùå | ‚úÖ | ‚úÖ | ‚úÖ | –ù–∏–∑–∫–∞—è |
| **Hypercorn** | Python | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | –°—Ä–µ–¥–Ω—è—è |
| **Daphne** | Python/Twisted | ‚úÖ | ‚úÖ | ‚ùå | ‚úÖ | –í—ã—Å–æ–∫–∞—è |
| **Gunicorn + Uvicorn** | Python/C | ‚úÖ | ‚úÖ | ‚ùå | ‚úÖ | –°—Ä–µ–¥–Ω—è—è |

#### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Uvicorn:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           ASGI Application              ‚îÇ
‚îÇ           (FastAPI app)                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ ASGI Protocol
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ             Uvicorn Worker              ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ    ‚îÇ      Event Loop (asyncio)   ‚îÇ      ‚îÇ
‚îÇ    ‚îÇ  ‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤  ‚îÇ      ‚îÇ
‚îÇ    ‚îÇ  ‚Ä¢ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è     ‚îÇ      ‚îÇ
‚îÇ    ‚îÇ  ‚Ä¢ Background tasks         ‚îÇ      ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞         ‚îÇ
‚îÇ                 (Linux)                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Gunicorn + Uvicorn:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Gunicorn Master            ‚îÇ
‚îÇ  ‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–∞–º–∏                 ‚îÇ
‚îÇ  ‚Ä¢ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ—è—Ö                 ‚îÇ
‚îÇ  ‚Ä¢ Graceful shutdown                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ Fork/Manage
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Uvicorn Worker #1              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ  ‚îÇ    Event Loop (asyncio)     ‚îÇ        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ...
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Uvicorn Worker #N              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ  ‚îÇ    Event Loop (asyncio)     ‚îÇ        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### **–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–æ—Ä–∫–µ—Ä–æ–≤**

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ, —Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ. –°–ª–∏—à–∫–æ–º –º–∞–ª–æ ‚Äî –æ—á–µ—Ä–µ–¥–∏ –∏ —Ç–∞–π–º–∞—É—Ç—ã; —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ ‚Äî –ª–∏—à–Ω—è—è —Å–º–µ–Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ —Ä–∞—Å—Ö–æ–¥ –ø–∞–º—è—Ç–∏.

```python
# –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞ –¥–ª—è CPU-bound (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏, –º–Ω–æ–≥–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π):
optimal_workers = (2 * CPU_cores) + 1

# –ü—Ä–∏–º–µ—Ä –¥–ª—è 4-—è–¥–µ—Ä–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞:
# workers = (2 * 4) + 1 = 9 –≤–æ—Ä–∫–µ—Ä–æ–≤

# –î–ª—è I/O-bound –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–∫–∞–∫ —Ç–∏–ø–∏—á–Ω—ã–π FastAPI: –ë–î, HTTP, —Ñ–∞–π–ª—ã):
# –≤–æ—Ä–∫–µ—Ä—ã —á–∞—Å—Ç–æ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞—é—Ç –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ I/O ‚Äî –º–æ–∂–Ω–æ –ø–æ–¥–Ω—è—Ç—å –∏—Ö —á–∏—Å–ª–æ
io_bound_workers = CPU_cores * 2   # –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ
io_bound_workers = CPU_cores * 3   # –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–µ–µ, –µ—Å–ª–∏ –µ—Å—Ç—å –ø–∞–º—è—Ç—å

# –î–ª—è 4-—è–¥–µ—Ä–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞:
# workers = 4 * 2 = 8 –∏–ª–∏ 4 * 3 = 12 –≤–æ—Ä–∫–µ—Ä–æ–≤

# –ò—Ç–æ–≥: –Ω–∞—á–∏–Ω–∞—Ç—å —Å (2 * CPU_cores) + 1, –¥–∞–ª—å—à–µ —Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º
# (RPS, –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU/–ø–∞–º—è—Ç–∏) –∏ –ø–æ –ø–∞–º—è—Ç–∏ –Ω–∞ –º–∞—à–∏–Ω–µ.
```

### **3. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å Docker**

#### **–ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è?**

**–ê–Ω–∞–ª–æ–≥–∏—è:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî —ç—Ç–æ ¬´–∫–æ—Ä–æ–±–∫–∞¬ª —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –∏ –≤—Å–µ–º, —á—Ç–æ –µ–º—É –Ω—É–∂–Ω–æ: –û–°, –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫–æ–¥. –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∫–æ—Ä–æ–±–∫–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ –≤–µ–¥—É—Ç —Å–µ–±—è –Ω–∞ –ª—é–±–æ–º –Ω–æ—É—Ç–±—É–∫–µ, —Å–µ—Ä–≤–µ—Ä–µ –∏–ª–∏ –æ–±–ª–∞–∫–µ. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∏ production –ø–æ–ª—É—á–∞—é—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—Ä–∞–∑ ‚Äî –º–µ–Ω—å—à–µ —Å—é—Ä–ø—Ä–∏–∑–æ–≤ ¬´—É –º–µ–Ω—è —Ä–∞–±–æ—Ç–∞–µ—Ç¬ª.

**–í —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏:** Docker —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–≤–µ—Ä—Å–∏–∏ Python, —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–∫–µ—Ç—ã, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏), —É–ø—Ä–æ—â–∞–µ—Ç –¥–µ–ø–ª–æ–π, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–∫–∞—Ç. –û–¥–∏–Ω –æ–±—Ä–∞–∑ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤ CI –∏ –¥–∞–ª—å—à–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ.

#### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Docker:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                Docker Host                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ          Docker Daemon                  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Image management                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Container runtime                    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Networking                           ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ Container  ‚îÇ ‚îÇ Container  ‚îÇ ‚îÇ Container ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  FastAPI   ‚îÇ ‚îÇ  PostgreSQL‚îÇ ‚îÇ   Redis   ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### **–°–ª–æ–∏ Docker –æ–±—Ä–∞–∑–∞ (Layered Filesystem):**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚Üê –ù–∞–∏–±–æ–ª–µ–µ –∏–∑–º–µ–Ω—è–µ–º—ã–π
‚îÇ         Application Code            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ         Dependencies (pip)          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ         Python Runtime              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ         Alpine/Ubuntu Base          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚Üê –ù–∞–∏–º–µ–Ω–µ–µ –∏–∑–º–µ–Ω—è–µ–º—ã–π
```

#### **–ü—Ä–∏–Ω—Ü–∏–ø—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Docker –æ–±—Ä–∞–∑–æ–≤:**

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω—É—é —Å–±–æ—Ä–∫—É (multi-stage build)** ‚Äî —Å–±–æ—Ä–∫–∞ –≤ –æ–¥–Ω–æ–º –æ–±—Ä–∞–∑–µ, –∑–∞–ø—É—Å–∫ –∏–∑ –¥—Ä—É–≥–æ–≥–æ; –≤ –∏—Ç–æ–≥–æ–≤—ã–π –æ–±—Ä–∞–∑ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—ã –∏ –ª–∏—à–Ω–∏–µ –ø–∞–∫–µ—Ç—ã
2. **–ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–µ–≤** ‚Äî –æ–±—ä–µ–¥–∏–Ω—è–π—Ç–µ `RUN` —Ç–∞–º, –≥–¥–µ —ç—Ç–æ –Ω–µ –ª–æ–º–∞–µ—Ç –∫—ç—à; –º–µ–Ω—å—à–µ —Å–ª–æ—ë–≤ ‚Äî –º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä –∏ –ø—Ä–æ—â–µ –∏—Å—Ç–æ—Ä–∏—è
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ .dockerignore** ‚Äî –Ω–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–±–æ—Ä–∫–∏ –ª–∏—à–Ω–µ–µ (.git, __pycache__, —Ç–µ—Å—Ç—ã, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é), —á—Ç–æ–±—ã —É—Å–∫–æ—Ä—è—Ç—å —Å–±–æ—Ä–∫—É –∏ –Ω–µ —Ç–∞—â–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã
4. **–í—ã–±–∏—Ä–∞–π—Ç–µ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –±–∞–∑–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã** ‚Äî alpine/slim –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω—ã—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤; –±—ã—Å—Ç—Ä–µ–µ pull –∏ –º–µ–Ω—å—à–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏
5. **–ö—ç—à–∏—Ä—É–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** ‚Äî —Å–Ω–∞—á–∞–ª–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ requirements/pyproject, —Å—Ç–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –ø–æ—Ç–æ–º –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥; –∫–æ–¥ –º–µ–Ω—è–µ—Ç—Å—è —á–∞—â–µ, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ ‚Äî —Ä–µ–∂–µ
6. **–£–¥–∞–ª—è–π—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã** ‚Äî –Ω–µ –æ—Å—Ç–∞–≤–ª—è—Ç—å –≤ –æ–±—Ä–∞–∑–µ –∫—ç—à–∏ pip, —Ç–µ—Å—Ç—ã, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### **4. –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**

#### **–ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è?**

**–ê–Ω–∞–ª–æ–≥–∏—è:** –û–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî –∫–∞–∫ –æ–¥–∏–Ω –º—É–∑—ã–∫–∞–Ω—Ç. Docker Compose ‚Äî –Ω–µ–±–æ–ª—å—à–æ–π –∞–Ω—Å–∞–º–±–ª—å —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–æ—Å—Ç–∞–≤–æ–º (API, –ë–î, Redis) –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ. Kubernetes ‚Äî –¥–∏—Ä–∏–∂–µ—Ä –±–æ–ª—å—à–æ–≥–æ –æ—Ä–∫–µ—Å—Ç—Ä–∞: –∫—Ç–æ –≥–¥–µ –∫—Ä—É—Ç–∏—Ç—Å—è, –∫–∞–∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å, –∫–∞–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è.

**–í production:** Compose –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å—Ç–µ–∫–æ–≤ –∏ –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞. Kubernetes ‚Äî –∫–æ–≥–¥–∞ –º–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–æ–≤, –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫, –∞–≤—Ç–æ–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–∑–ª–æ–≤ –∏ –≤—ã—Å–æ–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏.

#### **Docker Compose vs Kubernetes:**

| –ê—Å–ø–µ–∫—Ç | Docker Compose | Kubernetes (K8s) |
|--------|---------------|------------------|
| **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ** | –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –Ω–µ–±–æ–ª—å—à–∏–µ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ã | –ö—Ä—É–ø–Ω—ã–µ, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ã |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å** | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** | –†—É—á–Ω–æ–µ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ |
| **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è | –í—ã—Å–æ–∫–∞—è |
| **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ** | –†—É—á–Ω–æ–µ | Rolling updates, blue-green |
| **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** | –ë–∞–∑–æ–≤–æ–µ | –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** | –î–æ 10 —Å–µ—Ä–≤–∏—Å–æ–≤ | –î–µ—Å—è—Ç–∫–∏/—Å–æ—Ç–Ω–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ |

#### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Kubernetes:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Control Plane               ‚îÇ
‚îÇ  ‚Ä¢ API Server                                  ‚îÇ
‚îÇ  ‚Ä¢ Scheduler                                   ‚îÇ
‚îÇ  ‚Ä¢ Controller Manager                          ‚îÇ
‚îÇ  ‚Ä¢ etcd (—Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è)                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Worker Nodes                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ               Pod (FastAPI)              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ Container  ‚îÇ  ‚îÇ Sidecar    ‚îÇ          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  FastAPI   ‚îÇ  ‚îÇ (log,mon)  ‚îÇ          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ          Kubelet | Docker | Networking         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **5. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**

–í production –≤–∞–∂–Ω–æ —è–≤–Ω–æ –∑–∞–¥–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤, —Ç–∞–π–º–∞—É—Ç—ã, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ª–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤. –ù–∏–∂–µ ‚Äî —Ç–∏–ø–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Python-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ ASGI-—Å–µ—Ä–≤–µ—Ä–æ–≤.

#### **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Python –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
```python
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
pip install -r requirements.txt

# –ü—Ä–æ–¥–∞–∫—à–µ–Ω:
pip install --no-cache-dir --upgrade pip
pip install --no-cache-dir -r requirements.txt

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π:
pip install \
  --no-cache-dir \
  --compile \
  --global-option="--strip" \
  -r requirements.txt
```

#### **Gunicorn –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**

Gunicorn ‚Äî –ø—Ä–æ—Ü–µ—Å—Å-–º–µ–Ω–µ–¥–∂–µ—Ä: —Å–æ–∑–¥–∞—ë—Ç –≤–æ—Ä–∫–µ—Ä—ã, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∏—Ö –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã (graceful shutdown). –î–ª—è ASGI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª–∞—Å—Å –≤–æ—Ä–∫–µ—Ä–∞ `uvicorn.workers.UvicornWorker`.

```python
# gunicorn_conf.py
import multiprocessing
import os

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤: –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –ø–æ —á–∏—Å–ª—É —è–¥–µ—Ä
workers_per_core_str = os.getenv("WORKERS_PER_CORE", "1")
web_concurrency_str = os.getenv("WEB_CONCURRENCY", None)

cores = multiprocessing.cpu_count()
workers_per_core = float(workers_per_core_str)
default_web_concurrency = workers_per_core * cores

if web_concurrency_str:
    web_concurrency = int(web_concurrency_str)
    assert web_concurrency > 0
else:
    web_concurrency = max(int(default_web_concurrency), 2)

# Gunicorn config
bind = "0.0.0.0:8000"
workers = web_concurrency
worker_class = "uvicorn.workers.UvicornWorker"
worker_connections = 1000
keepalive = 5
timeout = 120
graceful_timeout = 30
max_requests = 1000
max_requests_jitter = 50

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
accesslog = "-"
errorlog = "-"
loglevel = "info"

# Security
limit_request_line = 4094
limit_request_fields = 100
limit_request_field_size = 8190
```

#### **Uvicorn –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```python
# uvicorn_config.py
import os

# –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
host = os.getenv("HOST", "0.0.0.0")
port = int(os.getenv("PORT", "8000"))
log_level = os.getenv("LOG_LEVEL", "info")

# HTTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
http_max_connections = int(os.getenv("HTTP_MAX_CONNECTIONS", "1000"))
http_timeout_keep_alive = int(os.getenv("HTTP_TIMEOUT_KEEP_ALIVE", "5"))

# WebSocket –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
ws_max_size = int(os.getenv("WS_MAX_SIZE", "16777216"))  # 16MB
ws_ping_interval = float(os.getenv("WS_PING_INTERVAL", "20.0"))
ws_ping_timeout = float(os.getenv("WS_PING_TIMEOUT", "20.0"))

# Proxy headers (–µ—Å–ª–∏ –∑–∞ reverse proxy)
proxy_headers = os.getenv("PROXY_HEADERS", "true").lower() == "true"
forwarded_allow_ips = os.getenv("FORWARDED_ALLOW_IPS", "*")

# Application
app = "app.main:app"
```

### **6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏**

#### **–ó–∞—á–µ–º –Ω—É–∂–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥?**

**–ê–Ω–∞–ª–æ–≥–∏—è:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚Äî —ç—Ç–æ ¬´–ø—Ä–∏–±–æ—Ä–Ω–∞—è –ø–∞–Ω–µ–ª—å¬ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: –Ω–∞–≥—Ä—É–∑–∫–∞, –∑–∞–¥–µ—Ä–∂–∫–∏, –æ—à–∏–±–∫–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU/–ø–∞–º—è—Ç–∏. –ë–µ–∑ –Ω–µ—ë –≤—ã —É–∑–Ω–∞–µ—Ç–µ –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞—á–∏–Ω–∞—é—Ç –∂–∞–ª–æ–≤–∞—Ç—å—Å—è. –° –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏ –∞–ª–µ—Ä—Ç–∞–º–∏ –º–æ–∂–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –ø—Ä–æ—Å–∞–¥–∫–∏ –ø—Ä–µ–≤—Ä–∞—Ç—è—Ç—Å—è –≤ –ø—Ä–æ—Å—Ç–æ–π.

**–í production:** –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ–º–æ–≥–∞—é—Ç –æ–±–æ—Å–Ω–æ–≤–∞—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ, –∏—Å–∫–∞—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—è—Ç—å —ç—Ñ—Ñ–µ–∫—Ç –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å SLO/SLA.

**–ó–∞—á–µ–º –Ω—É–∂–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω–∏ –ø–æ–≤–ª–∏—è—é—Ç –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** ‚Äî –∞–ª–µ—Ä—Ç—ã –ø–æ –∑–∞–¥–µ—Ä–∂–∫–∞–º, –æ—à–∏–±–∫–∞–º, –ø–∞–¥–µ–Ω–∏—é –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- **–ü–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** ‚Äî RPS, –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (p50/p95/p99), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** ‚Äî –∫–æ–≥–¥–∞ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –≤–æ—Ä–∫–µ—Ä—ã, –Ω–æ–¥—ã, —Ä–µ–ø–ª–∏–∫–∏
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫** ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –∑–∞–∫–∞–∑—ã, –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –∏ —Ç.–ø.

#### **–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**

1. **Application Metrics (–º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è):**
   - **Request rate (RPS)** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
   - **Response time (p50, p95, p99)** - –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ (–º–µ–¥–∏–∞–Ω–∞, 95-–π –∏ 99-–π –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏)
   - **Error rate (4xx, 5xx)** - –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞
   - **Success rate** - –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

2. **System Metrics (—Å–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏):**
   - **CPU usage** - –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
   - **Memory usage** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
   - **Disk I/O** - –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–∏—Å–∫
   - **Network I/O** - —Å–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫

3. **Business Metrics (–±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏):**
   - **Active users** - –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
   - **Conversion rate** - –∫–æ–Ω–≤–µ—Ä—Å–∏—è
   - **Revenue** - –¥–æ—Ö–æ–¥

#### **–°—Ç–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Application   ‚îÇ    ‚îÇ    Prometheus   ‚îÇ    ‚îÇ    Grafana      ‚îÇ
‚îÇ     FastAPI     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫     (—Å–±–æ—Ä       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫   (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è ‚îÇ
‚îÇ   + –º–µ—Ç—Ä–∏–∫–∏     ‚îÇ    ‚îÇ     –º–µ—Ç—Ä–∏–∫)     ‚îÇ    ‚îÇ     –∏ –∞–ª–µ—Ä—Ç—ã)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Alert Manager                              ‚îÇ
‚îÇ                    (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–ª–µ—Ä—Ç–∞–º–∏)                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### **Health checks –∏ readiness probes:**
```python
# app/api/v1/endpoints/health.py
from fastapi import APIRouter, Depends, HTTPException
from sqlalchemy import text
from sqlalchemy.ext.asyncio import AsyncSession
from datetime import datetime, timezone
import redis
import psutil
import os

from app.api.deps import get_db

router = APIRouter(prefix="/health", tags=["health"])

@router.get("/")
async def health_check():
    """
    –ë–∞–∑–æ–≤—ã–π health check ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∂–∏–≤–æ—Å—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞.
    
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–º–∏ –±–∞–ª–∞–Ω—Å–µ—Ä–∞–º–∏ –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏ (Kubernetes liveness).
    –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ë–î/–∫—ç—à ‚Äî –¥–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å /health/detailed –∏ /health/ready.
    """
    return {
        "status": "healthy",
        "timestamp": datetime.now(timezone.utc).isoformat(),  # UTC –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
        "service": "library-api"
    }

@router.get("/detailed")
async def detailed_health_check(
    db: AsyncSession = Depends(get_db)
):
    """
    –î–µ—Ç–∞–ª—å–Ω—ã–π health check —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
    
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: –ë–î, Redis, –¥–∏—Å–∫, –ø–∞–º—è—Ç—å.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å—ã healthy / warning / critical –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –Ω–µ –¥–ª—è readiness –≤ K8s.
    """
    checks = {
        "api": "healthy",
        "database": "unknown",
        "cache": "unknown",
        "disk": "unknown",
        "memory": "unknown"
    }
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    try:
        await db.execute(text("SELECT 1"))
        checks["database"] = "healthy"
    except Exception as e:
        checks["database"] = f"unhealthy: {str(e)}"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ Redis
    try:
        # –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –í production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ redis.asyncio –¥–ª—è async –æ–ø–µ—Ä–∞—Ü–∏–π
        # import redis.asyncio as redis
        # redis_client = await redis.from_url(
        #     os.getenv("REDIS_URL", "redis://localhost:6379/0"),
        #     decode_responses=True
        # )
        # await redis_client.ping()
        
        # –î–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ (–≤ health check —ç—Ç–æ –¥–æ–ø—É—Å—Ç–∏–º–æ):
        redis_client = redis.Redis(
            host=os.getenv("REDIS_HOST", "localhost"),
            port=int(os.getenv("REDIS_PORT", "6379")),
            decode_responses=True,
            socket_connect_timeout=2  # –¢–∞–π–º–∞—É—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
        )
        redis_client.ping()
        checks["cache"] = "healthy"
    except Exception as e:
        checks["cache"] = f"unhealthy: {str(e)}"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–∞
    try:
        disk_usage = psutil.disk_usage("/")
        checks["disk"] = {
            "status": "healthy",
            "total": disk_usage.total,
            "used": disk_usage.used,
            "free": disk_usage.free,
            "percent": disk_usage.percent
        }
        
        if disk_usage.percent > 90:
            checks["disk"]["status"] = "warning"
        if disk_usage.percent > 95:
            checks["disk"]["status"] = "critical"
            
    except Exception as e:
        checks["disk"] = f"unhealthy: {str(e)}"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏
    try:
        memory = psutil.virtual_memory()
        checks["memory"] = {
            "status": "healthy",
            "total": memory.total,
            "available": memory.available,
            "percent": memory.percent
        }
        
        if memory.percent > 85:
            checks["memory"]["status"] = "warning"
        if memory.percent > 95:
            checks["memory"]["status"] = "critical"
            
    except Exception as e:
        checks["memory"] = f"unhealthy: {str(e)}"
    
    # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–±—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
    overall_status = "healthy"
    for check_name, check_result in checks.items():
        if isinstance(check_result, dict):
            if check_result.get("status") in ["warning", "critical"]:
                overall_status = check_result["status"]
        elif "unhealthy" in str(check_result):
            overall_status = "unhealthy"
    
    return {
        "status": overall_status,
        "timestamp": datetime.now(timezone.utc).isoformat(),
        "checks": checks
    }

@router.get("/ready")
async def readiness_probe(db: AsyncSession = Depends(get_db)):
    """Readiness probe –¥–ª—è Kubernetes"""
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    dependencies_ok = True
    errors = []
    
    # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
    try:
        await db.execute(text("SELECT 1"))
    except Exception as e:
        dependencies_ok = False
        errors.append(f"Database: {str(e)}")
    
    # Redis
    try:
        # –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –í production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ async Redis –∫–ª–∏–µ–Ω—Ç
        redis_client = redis.Redis(
            host=os.getenv("REDIS_HOST", "localhost"),
            port=int(os.getenv("REDIS_PORT", "6379")),
            socket_connect_timeout=2  # –¢–∞–π–º–∞—É—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
        )
        redis_client.ping()
    except Exception as e:
        dependencies_ok = False
        errors.append(f"Redis: {str(e)}")
    
    if not dependencies_ok:
        raise HTTPException(
            status_code=503,
            detail={
                "status": "not ready",
                "errors": errors
            }
        )
    
    return {"status": "ready"}

@router.get("/startup")
async def startup_probe():
    """Startup probe –¥–ª—è Kubernetes (–¥–æ–ª–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)"""
    # –ú–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Ç.–¥.
    return {"status": "started"}
```

### **7. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ**

#### **–ó–∞—á–µ–º –æ—Ç–¥–µ–ª—å–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ?**

**–ê–Ω–∞–ª–æ–≥–∏—è:** –í –≥–∞—Ä–∞–∂–µ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–ª—é—á–∏ –≤ –∑–∞–º–∫–µ –∑–∞–∂–∏–≥–∞–Ω–∏—è. –ù–∞ —É–ª–∏—Ü–µ ‚Äî –Ω–µ–ª—å–∑—è: –∏ —É–≥–æ–Ω, –∏ –∫—Ä–∞–∂–∏ –∏–∑ —Å–∞–ª–æ–Ω–∞. –í production –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, –∫ –Ω–µ–º—É —Å—Ç—Ä–µ–º—è—Ç—Å—è –±–æ—Ç—ã –∏ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–∏ ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∂—ë—Å—Ç—á–µ, —á–µ–º –≤ dev.

**–í production:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã HTTPS, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ CORS, rate limiting, –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –º–∏–Ω–∏–º—É–º –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∞—Ä—É–∂—É.

#### **OWASP Top 10 –¥–ª—è API:**
1. **Broken Object Level Authorization** - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ –æ–±—ä–µ–∫—Ç–∞–º
2. **Broken Authentication** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ JWT, 2FA, rate limiting
3. **Excessive Data Exposure** - –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ –ª–∏—à–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ
4. **Lack of Resources & Rate Limiting** - –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã
5. **Broken Function Level Authorization** - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏
6. **Mass Assignment** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Pydantic –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
7. **Security Misconfiguration** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
8. **Injection** - –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, ORM
9. **Improper Assets Management** - –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API
10. **Insufficient Logging & Monitoring** - –ª–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

#### **–ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ HTTP:**

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** FastAPI –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ middleware.

**–í–∞—Ä–∏–∞–Ω—Ç 1: –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π middleware (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```python
# app/core/middleware.py
from fastapi import Request
from starlette.middleware.base import BaseHTTPMiddleware

class SecurityHeadersMiddleware(BaseHTTPMiddleware):
    """Middleware –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"""
    
    async def dispatch(self, request: Request, call_next):
        response = await call_next(request)
        
        # –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
        response.headers["X-Content-Type-Options"] = "nosniff"
        response.headers["X-Frame-Options"] = "SAMEORIGIN"
        response.headers["X-XSS-Protection"] = "1; mode=block"
        response.headers["Referrer-Policy"] = "strict-origin-when-cross-origin"
        response.headers["Strict-Transport-Security"] = "max-age=31536000; includeSubDomains"
        
        # Content Security Policy (–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
        response.headers["Content-Security-Policy"] = (
            "default-src 'self'; "
            "script-src 'self' 'unsafe-inline'; "
            "style-src 'self' 'unsafe-inline'; "
            "img-src 'self' data: https:; "
            "font-src 'self' data:;"
        )
        
        return response
```

```python
# app/main.py
from fastapi import FastAPI
from fastapi.middleware.trustedhost import TrustedHostMiddleware
from fastapi.middleware.gzip import GZipMiddleware
from app.core.middleware import SecurityHeadersMiddleware

app = FastAPI()

# Middleware –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
# –í–∞–∂–Ω–æ: –ø–æ—Ä—è–¥–æ–∫ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ - middleware –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
app.add_middleware(SecurityHeadersMiddleware)  # –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–º
app.add_middleware(GZipMiddleware, minimum_size=1000)
app.add_middleware(TrustedHostMiddleware, allowed_hosts=["example.com"])  # –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ secure-headers (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**

```python
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞: pip install secure-headers

# app/core/middleware.py
from fastapi import Request
from starlette.middleware.base import BaseHTTPMiddleware
from secure import Secure

secure_headers = Secure()

class SecurityHeadersMiddleware(BaseHTTPMiddleware):
    """Middleware –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É secure"""
    
    async def dispatch(self, request: Request, call_next):
        response = await call_next(request)
        secure_headers.framework.fastapi(response)
        return response
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏:
- `Content-Security-Policy` - –∑–∞—â–∏—Ç–∞ –æ—Ç XSS
- `X-Content-Type-Options: nosniff` - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ MIME-sniffing
- `X-Frame-Options: SAMEORIGIN` - –∑–∞—â–∏—Ç–∞ –æ—Ç clickjacking
- `X-XSS-Protection: 1; mode=block` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç XSS
- `Referrer-Policy: strict-origin-when-cross-origin` - –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–µ—Ä–µ–¥–∞—á–∏ referrer
- `Strict-Transport-Security` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ HTTPS

### **8. CI/CD –ø–∞–π–ø–ª–∞–π–Ω**

#### **–ó–∞—á–µ–º –Ω—É–∂–µ–Ω CI/CD?**

**–ê–Ω–∞–ª–æ–≥–∏—è:** CI/CD ‚Äî —ç—Ç–æ ¬´–∫–æ–Ω–≤–µ–π–µ—Ä —Å–±–æ—Ä–∫–∏ –∏ –¥–æ—Å—Ç–∞–≤–∫–∏¬ª: –∫–æ–¥ –ø–æ–ø–∞–ª –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≥–æ–Ω—è—é—Ç—Å—è —Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Üí –ø—Ä–∏ —É—Å–ø–µ—Ö–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –æ–±—Ä–∞–∑ –∏ –≤—ã–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –Ω—É–∂–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ. –í–º–µ—Å—Ç–æ —Ä—É—á–Ω—ã—Ö —à–∞–≥–æ–≤ –ø–æ 10‚Äì20 —Ä–∞–∑ –≤ –¥–µ–Ω—å ‚Äî –æ–¥–∏–Ω –ø—É—à –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

**–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:** CI/CD —Å–Ω–∏–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ ¬´—É –º–µ–Ω—è —Ä–∞–±–æ—Ç–∞–ª–æ¬ª-–±–∞–≥–æ–≤, —É—Å–∫–æ—Ä—è–µ—Ç –≤—ã—Ö–æ–¥ —Ñ–∏—á –∏ —Ñ–∏–∫—Å–æ–≤ –∏ —É–º–µ–Ω—å—à–∞–µ—Ç –æ—à–∏–±–∫–∏ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ.

**CI/CD (Continuous Integration / Continuous Deployment)** ‚Äî –ø—Ä–∞–∫—Ç–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –Ω–∞ —Ä–∞–Ω–Ω–∏—Ö —ç—Ç–∞–ø–∞—Ö** ‚Äî —Ç–µ—Å—Ç—ã –∏ –ª–∏–Ω—Ç–µ—Ä—ã –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–º–∏—Ç–∞
- **–ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π** ‚Äî –æ—Ç –∫–æ–º–º–∏—Ç–∞ –¥–æ production –∑–∞ –º–∏–Ω—É—Ç—ã, –∞ –Ω–µ —á–∞—Å—ã
- **–°–Ω–∏–∂–µ–Ω–∏–µ —Ä–∏—Å–∫–∞ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫** ‚Äî –º–µ–Ω—å—à–µ —Ä—É—á–Ω—ã—Ö —à–∞–≥–æ–≤ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –∏ –¥–µ–ø–ª–æ–µ
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–∫–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π** ‚Äî –æ—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –æ–±—Ä–∞–∑—É –∏–ª–∏ —Ä–µ–≤–∏–∑–∏–∏ –ø–æ –æ–¥–Ω–æ–º—É –¥–µ–π—Å—Ç–≤–∏—é

#### **–≠—Ç–∞–ø—ã CI/CD:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Git Push                             ‚îÇ
‚îÇ  (—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø—É—à–∏—Ç –∫–æ–¥ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Continuous Integration (CI)                ‚îÇ
‚îÇ  ‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ (lint, format)                         ‚îÇ
‚îÇ  ‚Ä¢ Unit —Ç–µ—Å—Ç—ã                                           ‚îÇ
‚îÇ  ‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã                                 ‚îÇ
‚îÇ  ‚Ä¢ –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞                                 ‚îÇ
‚îÇ  ‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏                                ‚îÇ
‚îÇ  ‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Continuous Deployment (CD)                 ‚îÇ
‚îÇ  ‚Ä¢ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ staging                              ‚îÇ
‚îÇ  ‚Ä¢ E2E —Ç–µ—Å—Ç—ã                                            ‚îÇ
‚îÇ  ‚Ä¢ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ production                           ‚îÇ
‚îÇ  ‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥                                           ‚îÇ
‚îÇ  ‚Ä¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- **GitHub Actions** ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π CI/CD –¥–ª—è GitHub
- **GitLab CI/CD** ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π CI/CD –¥–ª—è GitLab
- **Jenkins** ‚Äî —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π CI/CD —Å–µ—Ä–≤–µ—Ä
- **CircleCI** ‚Äî –æ–±–ª–∞—á–Ω—ã–π CI/CD —Å–µ—Ä–≤–∏—Å

#### **–ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–π —á–∞—Å—Ç–∏**

- **Dev ‚â† Production:** —Ä–∞–∑–Ω—ã–µ —Ü–µ–ª–∏ (—Å–∫–æ—Ä–æ—Å—Ç—å –∏—Ç–µ—Ä–∞—Ü–∏–π vs —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å), —Ä–∞–∑–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞.
- **12 —Ñ–∞–∫—Ç–æ—Ä–æ–≤** –∑–∞–¥–∞—é—Ç –ø—Ä–∏–≤—ã—á–∫—É: –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∫–æ–Ω—Ñ–∏–≥ –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏, stateless, –ø–æ—Ä—Ç—ã, –ª–æ–≥–∏ –∫–∞–∫ –ø–æ—Ç–æ–∫, –∞–¥–º–∏–Ω-–∑–∞–¥–∞—á–∏ –æ—Ç–¥–µ–ª—å–Ω–æ.
- **ASGI-—Å–µ—Ä–≤–µ—Ä** (Uvicorn/Gunicorn) ‚Äî –∫—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç—Ä–∞—Ñ–∏–∫; —á–∏—Å–ª–æ –≤–æ—Ä–∫–µ—Ä–æ–≤ —Å—á–∏—Ç–∞—é—Ç –æ—Ç —Ç–∏–ø–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ (CPU-bound vs I/O-bound).
- **Docker** —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É–ø—Ä–æ—â–∞–µ—Ç –¥–µ–ø–ª–æ–π; –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞ –∏ .dockerignore –¥–µ–ª–∞—é—Ç –æ–±—Ä–∞–∑ –º–µ–Ω—å—à–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ.
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** (–º–µ—Ç—Ä–∏–∫–∏, health, –∞–ª–µ—Ä—Ç—ã) –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –¥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ.
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ production** ‚Äî HTTPS, –∑–∞–≥–æ–ª–æ–≤–∫–∏, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –º–∏–Ω–∏–º—É–º –æ—Ç–ª–∞–¥–∫–∏ –Ω–∞—Ä—É–∂—É, —É—á—ë—Ç OWASP.
- **CI/CD** –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç—ã, —Å–±–æ—Ä–∫—É –æ–±—Ä–∞–∑–æ–≤ –∏ –≤—ã–∫–∞—Ç, —Å–Ω–∏–∂–∞–µ—Ç —Ä—É—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —É—Å–∫–æ—Ä—è–µ—Ç –≤—ã—Ö–æ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

---

## **üîß –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å**

### **1. Dockerfile (–º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞)**

**–ó–∞—á–µ–º –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞:** –ù–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ —Å—Ç–∞–≤–∏–º –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏; –Ω–∞ –≤—Ç–æ—Ä–æ–º –∫–æ–ø–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ (–∫–æ–¥ + —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã). –í —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç gcc, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –∫—ç—à–∏ ‚Äî –æ–±—Ä–∞–∑ –º–µ–Ω—å—à–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ.

```dockerfile
# Dockerfile
# –≠—Ç–∞–ø 1 (builder): —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Å–±–æ—Ä–∫–∞
# –ò—Ç–æ–≥–æ–≤—ã–π –æ–±—Ä–∞–∑ —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞
FROM python:3.11-slim as builder

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Å–±–æ—Ä–∫–∏
RUN apt-get update && apt-get install -y \
    gcc \
    g++ \
    libpq-dev \
    curl \
    && rm -rf /var/lib/apt/lists/*

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Poetry (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pip)
# –í–∞—Ä–∏–∞–Ω—Ç 1: –° Poetry
ENV POETRY_VERSION=1.7.1
ENV POETRY_NO_INTERACTION=1 \
    POETRY_VENV_IN_PROJECT=1 \
    POETRY_CACHE_DIR=/tmp/poetry_cache
RUN curl -sSL https://install.python-poetry.org | python3 -
ENV PATH="/root/.local/bin:$PATH"

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
WORKDIR /app
COPY pyproject.toml poetry.lock* ./

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–±–µ–∑ dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
RUN poetry config virtualenvs.create false \
    && poetry install --no-interaction --no-ansi --no-root --without dev \
    && rm -rf $POETRY_CACHE_DIR

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ë–µ–∑ Poetry (–ø—Ä–æ—â–µ, –Ω–æ –º–µ–Ω–µ–µ –≥–∏–±–∫–æ)
# COPY requirements.txt .
# RUN pip install --no-cache-dir --upgrade pip \
#     && pip install --no-cache-dir -r requirements.txt

# –≠—Ç–∞–ø 2 (production): —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞
# –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ –∑–∞–Ω–æ–≤–æ ‚Äî –≤ –Ω—ë–º –Ω–µ—Ç gcc, build-–ø–∞–∫–µ—Ç–æ–≤ –∏ –∫—ç—à–µ–π –∏–∑ builder
FROM python:3.11-slim as production

# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –¥–ª—è runtime (–Ω–∞–ø—Ä–∏–º–µ—Ä, libpq –¥–ª—è psycopg2)
RUN apt-get update && apt-get install -y \
    libpq-dev \
    curl \
    && rm -rf /var/lib/apt/lists/*

# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
RUN groupadd -r fastapi && useradd -r -g fastapi fastapi

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏–∑ builder —ç—Ç–∞–ø–∞
COPY --from=builder /usr/local/lib/python3.11/site-packages/ /usr/local/lib/python3.11/site-packages/
COPY --from=builder /usr/local/bin/ /usr/local/bin/

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
WORKDIR /app
COPY . .

# –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
RUN chown -R fastapi:fastapi /app
USER fastapi

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
ENV PYTHONPATH=/app
ENV PYTHONUNBUFFERED=1
ENV PYTHONDONTWRITEBYTECODE=1

# Health check
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
    CMD curl -f http://localhost:8000/health || exit 1

# Expose –ø–æ—Ä—Ç
EXPOSE 8000

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
CMD ["gunicorn", "-c", "gunicorn_conf.py", "app.main:app"]
```

### **2. Docker Compose –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Docker Compose v2 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–∞–Ω–¥—É `docker compose` (–±–µ–∑ –¥–µ—Ñ–∏—Å–∞), –Ω–æ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ—Å—Ç–∞–µ—Ç—Å—è `docker-compose.yml`.

```yaml
# docker-compose.yml
# –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: version —É—Å—Ç–∞—Ä–µ–ª –≤ Docker Compose v2, –Ω–æ –æ—Å—Ç–∞–≤–ª–µ–Ω –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
version: '3.8'

services:
  # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  api:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: library-api
    ports:
      - "8000:8000"
    environment:
      - DATABASE_URL=postgresql+asyncpg://postgres:postgres@db:5432/library_db
      - REDIS_URL=redis://redis:6379/0
      - SECRET_KEY=${SECRET_KEY}
      - DEBUG=False
      - LOG_LEVEL=info
    env_file:
      - .env
    volumes:
      - ./uploads:/app/uploads
      - ./logs:/app/logs
    depends_on:
      db:
        condition: service_healthy
      redis:
        condition: service_healthy
    restart: unless-stopped
    networks:
      - library-network
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health/ready"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

  # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
  db:
    image: postgres:15-alpine
    container_name: library-db
    environment:
      - POSTGRES_DB=library_db
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgres
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./scripts/init-db.sql:/docker-entrypoint-initdb.d/init.sql
    ports:
      - "5432:5432"
    networks:
      - library-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 10s
      timeout: 5s
      retries: 5

  # Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–µ—Å—Å–∏–π
  redis:
    image: redis:7-alpine
    container_name: library-redis
    command: redis-server --appendonly yes --requirepass ${REDIS_PASSWORD}
    volumes:
      - redis_data:/data
    ports:
      - "6379:6379"
    networks:
      - library-network
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 10s
      timeout: 3s
      retries: 3

  # Nginx –∫–∞–∫ reverse proxy
  nginx:
    image: nginx:alpine
    container_name: library-nginx
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf
      - ./nginx/ssl:/etc/nginx/ssl
      - ./uploads:/usr/share/nginx/uploads:ro
    depends_on:
      - api
    networks:
      - library-network
    restart: unless-stopped

  # Prometheus –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
  prometheus:
    image: prom/prometheus:latest
    container_name: library-prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml
      - prometheus_data:/prometheus
    command:
      - '--config.file=/etc/prometheus/prometheus.yml'
      - '--storage.tsdb.path=/prometheus'
      - '--web.console.libraries=/etc/prometheus/console_libraries'
      - '--web.console.templates=/etc/prometheus/consoles'
      - '--storage.tsdb.retention.time=200h'
      - '--web.enable-lifecycle'
    networks:
      - library-network
    restart: unless-stopped

  # Grafana –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
  grafana:
    image: grafana/grafana:latest
    container_name: library-grafana
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=${GRAFANA_PASSWORD}
    volumes:
      - grafana_data:/var/lib/grafana
      - ./grafana/dashboards:/etc/grafana/provisioning/dashboards
      - ./grafana/datasources:/etc/grafana/provisioning/datasources
    depends_on:
      - prometheus
    networks:
      - library-network
    restart: unless-stopped

volumes:
  postgres_data:
  redis_data:
  prometheus_data:
  grafana_data:

networks:
  library-network:
    driver: bridge
```

### **3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx**

```nginx
# nginx/nginx.conf
# –ì–ª–∞–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
user nginx;
worker_processes auto;
error_log /var/log/nginx/error.log warn;
pid /var/run/nginx.pid;

events {
    worker_connections 1024;
    multi_accept on;
    use epoll;
}

http {
    # –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    include /etc/nginx/mime.types;
    default_type application/octet-stream;
    
    # –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤
    log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                    '$status $body_bytes_sent "$http_referer" '
                    '"$http_user_agent" "$http_x_forwarded_for"';
    
    access_log /var/log/nginx/access.log main;
    
    # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    client_max_body_size 100M;
    
    # Gzip —Å–∂–∞—Ç–∏–µ
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_types
        text/plain
        text/css
        text/xml
        text/javascript
        application/json
        application/javascript
        application/xml+rss
        application/atom+xml
        image/svg+xml;
    
    # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
    open_file_cache max=1000 inactive=20s;
    open_file_cache_valid 30s;
    open_file_cache_min_uses 2;
    open_file_cache_errors on;
    
    # –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Referrer-Policy "strict-origin-when-cross-origin" always;
    
    # SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ HTTPS)
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_prefer_server_ciphers on;
    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384;
    ssl_session_timeout 1d;
    ssl_session_cache shared:SSL:50m;
    ssl_session_tickets off;
    ssl_stapling on;
    ssl_stapling_verify on;
    
    # Upstream –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏
    upstream fastapi_servers {
        least_conn;
        server api:8000 max_fails=3 fail_timeout=30s;
        # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏
        # server api2:8000 max_fails=3 fail_timeout=30s;
        # server api3:8000 max_fails=3 fail_timeout=30s;
    }
    
    # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä
    server {
        listen 80;
        server_name library.example.com;
        return 301 https://$server_name$request_uri;
    }
    
    server {
        listen 443 ssl http2;
        server_name library.example.com;
        
        # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–∏)
        ssl_certificate /etc/nginx/ssl/live/library.example.com/fullchain.pem;
        ssl_certificate_key /etc/nginx/ssl/live/library.example.com/privkey.pem;
        
        # –ö–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
        root /usr/share/nginx/html;
        index index.html;
        
        # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
        location /static/ {
            alias /usr/share/nginx/static/;
            expires 1y;
            add_header Cache-Control "public, immutable";
            access_log off;
        }
        
        location /uploads/ {
            alias /usr/share/nginx/uploads/;
            expires 1h;
            add_header Cache-Control "public";
            # –ó–∞—â–∏—Ç–∞ –æ—Ç –≥–æ—Ä—è—á–∏—Ö —Å—Å—ã–ª–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
            # valid_referers none blocked server_names;
            # if ($invalid_referer) {
            #     return 403;
            # }
        }
        
        # API endpoints
        location /api/ {
            proxy_pass http://fastapi_servers;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            proxy_set_header X-Forwarded-Host $host;
            proxy_set_header X-Forwarded-Port $server_port;
            
            # –¢–∞–π–º–∞—É—Ç—ã
            proxy_connect_timeout 60s;
            proxy_send_timeout 60s;
            proxy_read_timeout 60s;
            
            # –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è
            proxy_buffering on;
            proxy_buffer_size 4k;
            proxy_buffers 8 4k;
            proxy_busy_buffers_size 8k;
            
            # WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞
            proxy_redirect off;
        }
        
        # Health checks
        location /health {
            proxy_pass http://fastapi_servers;
            proxy_set_header Host $host;
            access_log off;
        }
        
        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
        location /docs {
            proxy_pass http://fastapi_servers;
            proxy_set_header Host $host;
        }
        
        location /redoc {
            proxy_pass http://fastapi_servers;
            proxy_set_header Host $host;
        }
        
        # –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
        location ~* \.(sql|bak|inc|old)$ {
            deny all;
            return 404;
        }
        
        # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∫—Ä—ã—Ç—ã–º —Ñ–∞–π–ª–∞–º
        location ~ /\. {
            deny all;
            return 404;
        }
        
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
        error_page 404 /404.html;
        error_page 500 502 503 504 /50x.html;
        
        location = /50x.html {
            root /usr/share/nginx/html;
        }
    }
}
```

### **4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus**

```yaml
# prometheus/prometheus.yml
global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    monitor: 'library-monitor'

# –ü—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–æ–≤
rule_files:
  - "alerts.yml"

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è scrape
scrape_configs:
  # Prometheus —Å–∞–º —Å–µ–±—è
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
    scrape_interval: 30s

  # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  - job_name: 'fastapi'
    static_configs:
      - targets: ['api:8000']
    scrape_interval: 15s
    metrics_path: '/metrics'
    scheme: 'http'
    
    # Relabeling –¥–ª—è –º–µ—Ç—Ä–∏–∫
    relabel_configs:
      - source_labels: [__address__]
        target_label: instance
        regex: '(.*):.*'
        replacement: '${1}'
    
  # Node Exporter (–º–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã)
  - job_name: 'node'
    static_configs:
      - targets: ['node-exporter:9100']
    scrape_interval: 30s

  # PostgreSQL
  - job_name: 'postgres'
    static_configs:
      - targets: ['postgres-exporter:9187']
    scrape_interval: 30s

  # Redis
  - job_name: 'redis'
    static_configs:
      - targets: ['redis-exporter:9121']
    scrape_interval: 30s

# Remote write (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è)
remote_write:
  - url: "http://thanos-receive:10908/api/v1/receive"
    queue_config:
      max_samples_per_send: 1000
      capacity: 10000
      max_shards: 200

# Remote read (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
remote_read:
  - url: "http://thanos-query:10904/api/v1/read"
```

### **5. –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ FastAPI**

```python
# app/core/metrics.py
import time
import logging
from typing import Callable
from fastapi import FastAPI, Request, Response
from prometheus_client import (
    Counter, Histogram, Gauge, Summary,
    generate_latest, CONTENT_TYPE_LATEST,
    CollectorRegistry, multiprocess
)
import psutil
import os

logger = logging.getLogger(__name__)

# –°–æ–∑–¥–∞–µ–º registry –¥–ª—è –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
def make_metrics_registry():
    """–°–æ–∑–¥–∞–Ω–∏–µ registry –¥–ª—è Prometheus –≤ –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ–º —Ä–µ–∂–∏–º–µ"""
    if 'prometheus_multiproc_dir' in os.environ:
        registry = CollectorRegistry()
        multiprocess.MultiProcessCollector(registry)
        return registry
    else:
        from prometheus_client import REGISTRY
        return REGISTRY

registry = make_metrics_registry()

# –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
REQUEST_COUNT = Counter(
    'http_requests_total',
    'Total HTTP requests',
    ['method', 'endpoint', 'status'],
    registry=registry
)

REQUEST_LATENCY = Histogram(
    'http_request_duration_seconds',
    'HTTP request latency',
    ['method', 'endpoint'],
    buckets=[0.01, 0.05, 0.1, 0.5, 1.0, 2.0, 5.0, 10.0],
    registry=registry
)

REQUEST_IN_PROGRESS = Gauge(
    'http_requests_in_progress',
    'HTTP requests in progress',
    ['method', 'endpoint'],
    registry=registry
)

# –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
BOOKS_CREATED = Counter(
    'books_created_total',
    'Total books created',
    registry=registry
)

USERS_REGISTERED = Counter(
    'users_registered_total',
    'Total users registered',
    registry=registry
)

BOOKINGS_CREATED = Counter(
    'bookings_created_total',
    'Total bookings created',
    registry=registry
)

# –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
DB_QUERY_DURATION = Histogram(
    'db_query_duration_seconds',
    'Database query duration',
    ['query_type'],
    registry=registry
)

DB_CONNECTIONS = Gauge(
    'db_connections',
    'Database connections',
    registry=registry
)

# –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã
SYSTEM_CPU_USAGE = Gauge(
    'system_cpu_usage_percent',
    'System CPU usage percentage',
    registry=registry
)

SYSTEM_MEMORY_USAGE = Gauge(
    'system_memory_usage_bytes',
    'System memory usage',
    registry=registry
)

SYSTEM_DISK_USAGE = Gauge(
    'system_disk_usage_bytes',
    'System disk usage',
    ['mountpoint'],
    registry=registry
)

# Middleware –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫
from starlette.middleware.base import BaseHTTPMiddleware

class MetricsMiddleware(BaseHTTPMiddleware):
    """
    Middleware –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
    
    –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –í FastAPI –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ BaseHTTPMiddleware –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è middleware.
    –ú–µ—Ç–æ–¥ dispatch –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.
    """
    
    async def dispatch(self, request: Request, call_next: Callable):
        # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –º–µ—Ç—Ä–∏–∫–∏ –∏ health checks (—á—Ç–æ–±—ã –Ω–µ –∑–∞—Å–æ—Ä—è—Ç—å –º–µ—Ç—Ä–∏–∫–∏)
        if request.url.path in ['/metrics', '/health', '/health/ready', '/health/startup']:
            return await call_next(request)
        
        method = request.method
        endpoint = request.url.path
        
        # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
        REQUEST_IN_PROGRESS.labels(method=method, endpoint=endpoint).inc()
        
        # –ò–∑–º–µ—Ä—è–µ–º –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
        start_time = time.time()
        
        try:
            response = await call_next(request)
            
            # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
            duration = time.time() - start_time
            REQUEST_LATENCY.labels(
                method=method, 
                endpoint=endpoint
            ).observe(duration)
            
            REQUEST_COUNT.labels(
                method=method,
                endpoint=endpoint,
                status=response.status_code
            ).inc()
            
            return response
            
        except Exception as e:
            # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏ –æ—à–∏–±–∫–∏
            duration = time.time() - start_time
            REQUEST_LATENCY.labels(
                method=method, 
                endpoint=endpoint
            ).observe(duration)
            
            REQUEST_COUNT.labels(
                method=method,
                endpoint=endpoint,
                status=500
            ).inc()
            
            # –õ–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É
            logger.error(f"Request failed: {method} {endpoint}", exc_info=True)
            
            raise
            
        finally:
            # –£–º–µ–Ω—å—à–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
            REQUEST_IN_PROGRESS.labels(method=method, endpoint=endpoint).dec()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ main.py:
# from app.core.metrics import MetricsMiddleware
# app.add_middleware(MetricsMiddleware)

# –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
def update_system_metrics():
    """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫"""
    # CPU
    cpu_percent = psutil.cpu_percent(interval=None)
    SYSTEM_CPU_USAGE.set(cpu_percent)
    
    # Memory
    memory = psutil.virtual_memory()
    SYSTEM_MEMORY_USAGE.set(memory.used)
    
    # Disk
    for partition in psutil.disk_partitions():
        try:
            usage = psutil.disk_usage(partition.mountpoint)
            SYSTEM_DISK_USAGE.labels(
                mountpoint=partition.mountpoint
            ).set(usage.used)
        except Exception:
            pass

# Endpoint –¥–ª—è –º–µ—Ç—Ä–∏–∫ Prometheus
# –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≠—Ç–æ—Ç endpoint –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ main.py
# –∏–ª–∏ —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–π router

# –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ router (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
from fastapi import APIRouter

metrics_router = APIRouter()

@metrics_router.get("/metrics")
async def get_metrics():
    """Endpoint –¥–ª—è Prometheus –º–µ—Ç—Ä–∏–∫"""
    # –û–±–Ω–æ–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
    update_system_metrics()
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –º–µ—Ç—Ä–∏–∫–∏
    data = generate_latest(registry)
    
    return Response(
        content=data,
        media_type=CONTENT_TYPE_LATEST
    )

# –í main.py:
# from app.core.metrics import metrics_router
# app.include_router(metrics_router)

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä—è–º–æ –≤ main.py
# @app.get("/metrics")
# async def get_metrics():
#     from app.core.metrics import update_system_metrics, registry, generate_latest, CONTENT_TYPE_LATEST
#     update_system_metrics()
#     data = generate_latest(registry)
#     return Response(content=data, media_type=CONTENT_TYPE_LATEST)

# –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫
from functools import wraps

def track_book_creation(func):
    """–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–∏–≥"""
    @wraps(func)
    async def wrapper(*args, **kwargs):
        result = await func(*args, **kwargs)
        BOOKS_CREATED.inc()
        return result
    return wrapper

def track_user_registration(func):
    """–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"""
    @wraps(func)
    async def wrapper(*args, **kwargs):
        result = await func(*args, **kwargs)
        USERS_REGISTERED.inc()
        return result
    return wrapper

def track_booking_creation(func):
    """–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π"""
    @wraps(func)
    async def wrapper(*args, **kwargs):
        result = await func(*args, **kwargs)
        BOOKINGS_CREATED.inc()
        return result
    return wrapper

# –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –º–µ—Ç—Ä–∏–∫ –ë–î
class DBQueryMetrics:
    """–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î"""
    
    def __init__(self, query_type: str):
        self.query_type = query_type
        self.start_time = None
    
    def __enter__(self):
        self.start_time = time.time()
        return self
    
    def __exit__(self, exc_type, exc_val, exc_tb):
        duration = time.time() - self.start_time
        DB_QUERY_DURATION.labels(query_type=self.query_type).observe(duration)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö
class BookService:
    
    @track_book_creation
    async def create_book(self, book_data):
        """–°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –º–µ—Ç—Ä–∏–∫"""
        with DBQueryMetrics("insert"):
            # SQL –∑–∞–ø—Ä–æ—Å
            pass
        return book
```

### **6. Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã**

```yaml
# k8s/namespace.yml
apiVersion: v1
kind: Namespace
metadata:
  name: library
  labels:
    name: library
---
# k8s/configmap.yml
apiVersion: v1
kind: ConfigMap
metadata:
  name: library-config
  namespace: library
data:
  DATABASE_URL: "postgresql+asyncpg://postgres:$(POSTGRES_PASSWORD)@library-db:5432/library_db"
  REDIS_URL: "redis://library-redis:6379/0"
  LOG_LEVEL: "info"
  DEBUG: "false"
  CORS_ORIGINS: "https://library.example.com"
  UPLOAD_DIR: "/app/uploads"
---
# k8s/secret.yml
apiVersion: v1
kind: Secret
metadata:
  name: library-secrets
  namespace: library
type: Opaque
data:
  SECRET_KEY: "base64-encoded-secret-key"  # echo -n "your-secret" | base64
  POSTGRES_PASSWORD: "base64-encoded-password"
  REDIS_PASSWORD: "base64-encoded-password"
---
# k8s/deployment.yml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: library-api
  namespace: library
  labels:
    app: library-api
spec:
  replicas: 3
  selector:
    matchLabels:
      app: library-api
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
  template:
    metadata:
      labels:
        app: library-api
      annotations:
        prometheus.io/scrape: "true"
        prometheus.io/port: "8000"
        prometheus.io/path: "/metrics"
    spec:
      containers:
      - name: api
        image: your-registry/library-api:latest
        imagePullPolicy: IfNotPresent
        ports:
        - containerPort: 8000
          name: http
        env:
        - name: DATABASE_URL
          valueFrom:
            configMapKeyRef:
              name: library-config
              key: DATABASE_URL
        - name: SECRET_KEY
          valueFrom:
            secretKeyRef:
              name: library-secrets
              key: SECRET_KEY
        - name: PROMETHEUS_MULTIPROC_DIR
          value: "/tmp/prometheus"
        envFrom:
        - configMapRef:
            name: library-config
        - secretRef:
            name: library-secrets
        resources:
          requests:
            memory: "256Mi"
            cpu: "250m"
          limits:
            memory: "512Mi"
            cpu: "500m"
        volumeMounts:
        - name: uploads
          mountPath: /app/uploads
        - name: prometheus-multiproc-dir
          mountPath: /tmp/prometheus
        livenessProbe:
          httpGet:
            path: /health
            port: 8000
          initialDelaySeconds: 30
          periodSeconds: 10
          timeoutSeconds: 5
          failureThreshold: 3
        readinessProbe:
          httpGet:
            path: /health/ready
            port: 8000
          initialDelaySeconds: 5
          periodSeconds: 5
          timeoutSeconds: 3
          failureThreshold: 3
        startupProbe:
          httpGet:
            path: /health/startup
            port: 8000
          initialDelaySeconds: 5
          periodSeconds: 10
          timeoutSeconds: 5
          failureThreshold: 30
      volumes:
      - name: uploads
        persistentVolumeClaim:
          claimName: library-uploads-pvc
      - name: prometheus-multiproc-dir
        emptyDir: {}
      securityContext:
        runAsUser: 1000
        runAsGroup: 1000
        fsGroup: 1000
---
# k8s/service.yml
apiVersion: v1
kind: Service
metadata:
  name: library-api
  namespace: library
  labels:
    app: library-api
spec:
  selector:
    app: library-api
  ports:
  - port: 8000
    targetPort: http
    protocol: TCP
    name: http
  type: ClusterIP
---
# k8s/ingress.yml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: library-ingress
  namespace: library
  annotations:
    kubernetes.io/ingress.class: nginx
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/proxy-body-size: "100m"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "60"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "60"
    nginx.ingress.kubernetes.io/configuration-snippet: |
      more_set_headers "X-Content-Type-Options: nosniff";
      more_set_headers "X-Frame-Options: SAMEORIGIN";
      more_set_headers "X-XSS-Protection: 1; mode=block";
spec:
  tls:
  - hosts:
    - library.example.com
    secretName: library-tls
  rules:
  - host: library.example.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: library-api
            port:
              number: 8000
---
# k8s/hpa.yml (Horizontal Pod Autoscaler)
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: library-api-hpa
  namespace: library
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: library-api
  minReplicas: 2
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
  behavior:
    scaleUp:
      stabilizationWindowSeconds: 60
      policies:
      - type: Pods
        value: 2
        periodSeconds: 60
      - type: Percent
        value: 50
        periodSeconds: 60
    scaleDown:
      stabilizationWindowSeconds: 300
      policies:
      - type: Pods
        value: 1
        periodSeconds: 60
```

### **7. –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –¥–µ–ø–ª–æ—è**

```bash
#!/bin/bash
# scripts/deploy.sh

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–µ–ø–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

set -e  # –í—ã—Ö–æ–¥ –ø—Ä–∏ –æ—à–∏–±–∫–µ

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo -e "${GREEN}–ù–∞—á–∞–ª–æ –¥–µ–ø–ª–æ—è Library API${NC}"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
check_environment() {
    echo -e "${YELLOW}–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è...${NC}"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker
    if ! command -v docker &> /dev/null; then
        echo -e "${RED}Docker –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω${NC}"
        exit 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker Compose (v2 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–∞–Ω–¥—É docker compose)
    if ! command -v docker-compose &> /dev/null && ! docker compose version &> /dev/null; then
        echo -e "${RED}Docker Compose –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω${NC}"
        exit 1
    fi
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–º–∞–Ω–¥—É –¥–ª—è docker compose
    if command -v docker-compose &> /dev/null; then
        DOCKER_COMPOSE_CMD="docker-compose"
    else
        DOCKER_COMPOSE_CMD="docker compose"
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    if [ ! -f ".env" ]; then
        echo -e "${RED}–§–∞–π–ª .env –Ω–µ –Ω–∞–π–¥–µ–Ω${NC}"
        exit 1
    fi
    
    echo -e "${GREEN}–û–∫—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ${NC}"
}

# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
build_images() {
    echo -e "${YELLOW}–°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤...${NC}"
    
    # –°–±–æ—Ä–∫–∞ API –æ–±—Ä–∞–∑–∞
    docker build -t library-api:latest -f Dockerfile .
    
    # –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
    # docker build -t library-api:dev -f Dockerfile.dev .
    
    echo -e "${GREEN}–û–±—Ä–∞–∑—ã —Å–æ–±—Ä–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ${NC}"
}

# –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
run_migrations() {
    echo -e "${YELLOW}–ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...${NC}"
    
    # –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å Alembic
    $DOCKER_COMPOSE_CMD run --rm api \
        alembic upgrade head
    
    echo -e "${GREEN}–ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ${NC}"
}

# –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
load_test_data() {
    echo -e "${YELLOW}–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö...${NC}"
    
    # –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
    $DOCKER_COMPOSE_CMD run --rm api \
        python scripts/seed_data.py
    
    echo -e "${GREEN}–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã${NC}"
}

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
run_tests() {
    echo -e "${YELLOW}–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤...${NC}"
    
    # Unit —Ç–µ—Å—Ç—ã
    $DOCKER_COMPOSE_CMD run --rm api \
        pytest tests/unit/ -v --cov=app --cov-report=html
    
    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
    $DOCKER_COMPOSE_CMD run --rm api \
        pytest tests/integration/ -v
    
    echo -e "${GREEN}–¢–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ${NC}"
}

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
start_application() {
    echo -e "${YELLOW}–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...${NC}"
    
    # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
    $DOCKER_COMPOSE_CMD down
    
    # –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
    $DOCKER_COMPOSE_CMD up -d
    
    # –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
    echo -e "${YELLOW}–û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...${NC}"
    
    MAX_RETRIES=30
    RETRY_COUNT=0
    
    while [ $RETRY_COUNT -lt $MAX_RETRIES ]; do
        if curl -s http://localhost:8000/health > /dev/null; then
            echo -e "${GREEN}–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ${NC}"
            return 0
        fi
        
        RETRY_COUNT=$((RETRY_COUNT + 1))
        echo -e "${YELLOW}–ü–æ–ø—ã—Ç–∫–∞ $RETRY_COUNT –∏–∑ $MAX_RETRIES...${NC}"
        sleep 2
    done
    
    echo -e "${RED}–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å –∑–∞ –æ—Ç–≤–µ–¥–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è${NC}"
    $DOCKER_COMPOSE_CMD logs api
    exit 1
}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
health_check() {
    echo -e "${YELLOW}–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏...${NC}"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ health endpoint
    HEALTH_RESPONSE=$(curl -s http://localhost:8000/health/detailed)
    HEALTH_STATUS=$(echo $HEALTH_RESPONSE | jq -r '.status')
    
    if [ "$HEALTH_STATUS" != "healthy" ]; then
        echo -e "${RED}Health check failed:${NC}"
        echo $HEALTH_RESPONSE | jq .
        exit 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö endpoints
    ENDPOINTS=("/api/v1/books/" "/api/v1/auth/me" "/docs" "/redoc")
    
    for endpoint in "${ENDPOINTS[@]}"; do
        if ! curl -s -f "http://localhost:8000$endpoint" > /dev/null; then
            echo -e "${RED}Endpoint $endpoint –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω${NC}"
            exit 1
        fi
    done
    
    echo -e "${GREEN}–í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ${NC}"
}

# –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è
main() {
    local step=$1
    
    case $step in
        "check")
            check_environment
            ;;
        "build")
            build_images
            ;;
        "migrate")
            run_migrations
            ;;
        "test")
            run_tests
            ;;
        "seed")
            load_test_data
            ;;
        "start")
            start_application
            ;;
        "health")
            health_check
            ;;
        "full")
            check_environment
            build_images
            run_tests
            run_migrations
            start_application
            sleep 5
            health_check
            ;;
        *)
            echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: $0 {check|build|migrate|test|seed|start|health|full}"
            exit 1
            ;;
    esac
}

# –ó–∞–ø—É—Å–∫
main "$@"
```

### **8. .env —Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**

```env
# .env.production
# ===== –ë–ê–ó–û–í–´–ï –ù–ê–°–¢–†–û–ô–ö–ò =====
PROJECT_NAME=Library API
VERSION=1.0.0
API_V1_STR=/api/v1
DEBUG=False

# ===== –ë–ê–ó–ê –î–ê–ù–ù–´–• =====
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:5432/${POSTGRES_DB}
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_DB=library_db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=secure_password_here

# ===== –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ =====
SECRET_KEY=your-256-bit-secret-change-this-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=30

# ===== CORS =====
BACKEND_CORS_ORIGINS=["https://library.example.com", "https://admin.library.example.com"]

# ===== REDIS =====
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=secure_redis_password_here

# ===== –ù–ê–°–¢–†–û–ô–ö–ò –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø =====
LOG_LEVEL=INFO
LOG_FORMAT=json
UPLOAD_DIR=/app/uploads
MAX_UPLOAD_SIZE=104857600  # 100MB
ALLOWED_FILE_TYPES=.jpg,.jpeg,.png,.pdf,.doc,.docx,.txt

# ===== EMAIL –ù–ê–°–¢–†–û–ô–ö–ò =====
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
EMAIL_FROM=noreply@library.example.com
EMAIL_FROM_NAME=Library System

# ===== –ú–û–ù–ò–¢–û–†–ò–ù–ì =====
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus
METRICS_ENABLED=True
SENTRY_DSN=https://your-sentry-dsn.ingest.sentry.io/project-id

# ===== –ù–ê–°–¢–†–û–ô–ö–ò –°–ï–†–í–ï–†–ê =====
HOST=0.0.0.0
PORT=8000
WORKERS_PER_CORE=1
WEB_CONCURRENCY=4
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=50
KEEPALIVE=5
TIMEOUT=120
GRACEFUL_TIMEOUT=30

# ===== –ù–ê–°–¢–†–û–ô–ö–ò –ö–≠–®–ê =====
CACHE_ENABLED=True
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300
CACHE_KEY_PREFIX=library_

# ===== –ù–ê–°–¢–†–û–ô–ö–ò –°–ï–°–°–ò–ô =====
SESSION_SECRET_KEY=session-secret-key-change-this
SESSION_COOKIE_NAME=library_session
SESSION_COOKIE_HTTPONLY=True
SESSION_COOKIE_SECURE=True
SESSION_COOKIE_SAMESITE=lax
```

---

## **üèÜ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –Ω–µ–¥–µ–ª—é 14**

### **–ß–∞—Å—Ç—å 1: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ ASGI —Å–µ—Ä–≤–µ—Ä:**
   - –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ keepalive –∏ timeout
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–≥—Ä—É–∑–∫–∏

2. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - Redis –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –≤ Nginx
   - –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞

3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –¥–ª—è —á—Ç–µ–Ω–∏—è
   - Connection pooling

### **–ß–∞—Å—Ç—å 2: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**

1. **–°–æ–∑–¥–∞–π—Ç–µ Docker –æ–±—Ä–∞–∑—ã:**
   - –ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞
   - –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –±–∞–∑–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã
   - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (non-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Docker Compose:**
   - –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - Health checks –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
   - Volume –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

3. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—é:**
   - –ë–∞–∑–æ–≤—ã–µ Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã
   - Horizontal Pod Autoscaler
   - Ingress –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä

### **–ß–∞—Å—Ç—å 3: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–µ—Ç—Ä–∏–∫–∏:**
   - Prometheus –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫
   - Grafana –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
   - –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

2. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - ELK stack –∏–ª–∏ Loki
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ (JSON)
   - –ê–ª–µ—Ä—Ç–∏–Ω–≥ –Ω–∞ –æ—à–∏–±–∫–∏

3. **–°–æ–∑–¥–∞–π—Ç–µ –¥–∞—à–±–æ—Ä–¥—ã:**
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - –ë–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

### **–ß–∞—Å—Ç—å 4: CI/CD –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ CI/CD –ø–∞–π–ø–ª–∞–π–Ω:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –°–±–æ—Ä–∫–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è Docker –æ–±—Ä–∞–∑–æ–≤
   - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã–µ —Å—Ä–µ–¥—ã

2. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–µ–ø–ª–æ—è:**
   - Blue-green deployments
   - Canary releases
   - Rollback –º–µ—Ö–∞–Ω–∏–∑–º—ã

3. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É:**
   - Infrastructure as Code (Terraform)
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–∞–∫ –∫–æ–¥
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

## **üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏**

### **–ë–∞–∑–æ–≤—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ (40 –±–∞–ª–ª–æ–≤):**
1. **Docker –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** (15 –±–∞–ª–ª–æ–≤):
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Dockerfile
   - Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
   - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ best practices

2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞** (15 –±–∞–ª–ª–æ–≤):
   - ASGI —Å–µ—Ä–≤–µ—Ä —Å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
   - Reverse proxy (Nginx)
   - Health checks –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

3. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** (10 –±–∞–ª–ª–æ–≤):
   - –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥
   - 12-—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ (30 –±–∞–ª–ª–æ–≤):**
1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏** (15 –±–∞–ª–ª–æ–≤):
   - Prometheus —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä
   - –ö–∞—Å—Ç–æ–º–Ω—ã–µ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏
   - –î–∞—à–±–æ—Ä–¥—ã Grafana

2. **CI/CD –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** (10 –±–∞–ª–ª–æ–≤):
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –°–±–æ—Ä–∫–∞ –∏ –¥–µ–ø–ª–æ–π
   - –û—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** (5 –±–∞–ª–ª–æ–≤):
   - –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
   - Rate limiting
   - –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫

### **–≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ (20 –±–∞–ª–ª–æ–≤):**
1. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** (10 –±–∞–ª–ª–æ–≤):
   - Horizontal Pod Autoscaler
   - –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –ë–î
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ CDN

2. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** (10 –±–∞–ª–ª–æ–≤):
   - Graceful shutdown
   - Circuit breaker
   - Retry –º–µ—Ö–∞–Ω–∏–∑–º—ã
   - –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

## **üéØ –ò—Ç–æ–≥ –Ω–µ–¥–µ–ª–∏ 14**

–ö –∫–æ–Ω—Ü—É –Ω–µ–¥–µ–ª–∏ –≤—ã –æ—Å–≤–æ–∏—Ç–µ **–Ω–∞–≤—ã–∫–∏, –Ω—É–∂–Ω—ã–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**: –æ—Ç –∫–æ–¥–∞ –¥–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –≤ production –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### **–ß—Ç–æ –≤—ã –∏–∑—É—á–∏–ª–∏**

1. **–§–∏–ª–æ—Å–æ—Ñ–∏—è production-ready**
   - –û—Ç–ª–∏—á–∏—è dev –∏ production (DEBUG, —Å–µ–∫—Ä–µ—Ç—ã, –≤–æ—Ä–∫–µ—Ä—ã, –∫—ç—à, rate limiting)
   - 12-—Ñ–∞–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –æ–∫—Ä—É–∂–µ–Ω–∏–µ, stateless, –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å

2. **ASGI-—Å–µ—Ä–≤–µ—Ä—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –†–æ–ª—å Uvicorn, Gunicorn+Uvicorn
   - –ü–æ–¥—Å—á—ë—Ç –≤–æ—Ä–∫–µ—Ä–æ–≤ –¥–ª—è CPU-bound –∏ I/O-bound
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤, keep-alive, graceful shutdown

3. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è**
   - Docker: –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞, .dockerignore, –æ–±—Ä–∞–∑—ã –Ω–∞ –±–∞–∑–µ slim/alpine
   - Docker Compose: —Å–µ—Ä–≤–∏—Å—ã, health checks, —Å–µ—Ç–∏, —Ç–æ–º–∞
   - Kubernetes: –∫–æ–≥–¥–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å —Å Compose, –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏**
   - –ó–∞—á–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∫–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—Ç—å (RPS, –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –æ—à–∏–±–∫–∏, —Ä–µ—Å—É—Ä—Å—ã)
   - –°—Ç–µ–∫: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí Prometheus ‚Üí Grafana ‚Üí –∞–ª–µ—Ä—Ç—ã
   - Health/readiness –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

5. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ**
   - OWASP Top 10 –¥–ª—è API
   - –ó–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (CSP, HSTS, X-Frame-Options –∏ –¥—Ä.)
   - HTTPS, –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –º–∏–Ω–∏–º—É–º –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∞—Ä—É–∂—É

6. **CI/CD**
   - –¶–µ–ª—å CI/CD: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã, —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤, –¥–µ–ø–ª–æ–π
   - –≠—Ç–∞–ø—ã: lint ‚Üí —Ç–µ—Å—Ç—ã ‚Üí —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ ‚Üí –¥–µ–ø–ª–æ–π (staging/production)
   - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: GitHub Actions, GitLab CI, Jenkins –∏ —Ç.–ø.

### **–ö–ª—é—á–µ–≤—ã–µ –Ω–∞–≤—ã–∫–∏**

- –°–±–æ—Ä–∫–∞ production-ready Docker-–æ–±—Ä–∞–∑–æ–≤ (multi-stage, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ASGI-—Å–µ—Ä–≤–µ—Ä–æ–≤ (Gunicorn/Uvicorn) –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫—É
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–º–µ—Ç—Ä–∏–∫–∏, health checks, –∞–ª–µ—Ä—Ç—ã)
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ CI/CD
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ production (–∑–∞–≥–æ–ª–æ–≤–∫–∏, HTTPS, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- –ü–æ–¥—Ö–æ–¥ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é (–≤–æ—Ä–∫–µ—Ä—ã, —Ä–µ–ø–ª–∏–∫–∏, –∫—ç—à)

### **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**

–ü–æ—Å–ª–µ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ:

- –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Docker –∏ Docker Compose
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx –∫–∞–∫ reverse proxy –∏ –±–∞–∑–æ–≤—ã–π SSL
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å Prometheus/Grafana –∏ —Å–≤–æ–∏ –º–µ—Ç—Ä–∏–∫–∏
- –û–ø–∏—Å–∞—Ç—å –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ CI/CD (—Ç–µ—Å—Ç—ã ‚Üí –æ–±—Ä–∞–∑ ‚Üí –≤—ã–∫–∞—Ç)
- –ó–∞–ª–æ–∂–∏—Ç—å –±–∞–∑–æ–≤—É—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å

### **–î–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏**

–≠—Ç–∏ –Ω–∞–≤—ã–∫–∏ –¥–µ–ª–∞—é—Ç –≤–∞—Å **–∏–Ω–∂–µ–Ω–µ—Ä–æ–º, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ç–æ–ª—å–∫–æ –ø–∏—à–µ—Ç –∫–æ–¥**, –Ω–æ –∏ —É–º–µ–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å –µ–≥–æ –≤ production.

**–ß—Ç–æ –∏–∑—É—á–∞—Ç—å –¥–∞–ª—å—à–µ:**

- Kubernetes: Deployment, Service, Ingress, HPA, —Å–µ–∫—Ä–µ—Ç—ã
- Observability: —Ç—Ä–µ–π—Å–∏–Ω–≥ (OpenTelemetry, Jaeger), —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ (ELK, Loki)
- IaC: Terraform, Ansible –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –£–≥–ª—É–±–ª–µ–Ω–∏–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: WAF, –∞—É–¥–∏—Ç, –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î –∏ –∫—ç—à–∞